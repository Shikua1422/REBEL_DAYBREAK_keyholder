<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>CD Player</title>

<style>
:root{
  --glow-white:#ffffff;
  --glow-red:#ff4d4d;
  --glow-cyan:#6fefff;
  --glow-blue:#4fdcff; /* ← 青を見やすく調整 */
  --glow-purple:#b06cff;
}

body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:sans-serif;
  overflow:hidden;
}

/* ===== CD ===== */
#cd{
  position:absolute;
  top:50%;
  left:50%;
  width:260px;
  height:260px;
  border-radius:50%;
  background:radial-gradient(#444 0%, #111 60%, #000 100%);
  transform:translate(-50%,-50%);
  transition:all .45s ease;
  z-index:5;
}
#cd.spin{
  animation:spin 3s linear infinite;
}
@keyframes spin{
  from{transform:translate(-50%,-50%) rotate(0deg);}
  to{transform:translate(-50%,-50%) rotate(360deg);}
}
#cd.mini{
  width:120px;
  height:120px;
  top:40px;
  left:40px;
  transform:none;
}

/* ===== VIDEO ===== */
#videoWrap{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:1;
}
iframe{
  width:70vw;
  height:39vw;
  max-width:960px;
  max-height:540px;
  border:none;
  transition:all .45s ease;
}
.miniVideo iframe{
  width:85vw;
  height:48vw;
}

/* ===== CONTROLS ===== */
#controls{
  position:absolute;
  bottom:40px;
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:18px;
  z-index:10;
}

/* --- buttons --- */
.btns{
  display:flex;
  gap:28px;
  align-items:center;
}
svg{
  width:44px;
  height:44px;
  fill:none;
  stroke:#fff;
  stroke-width:2.5;
  cursor:pointer;
}

/* ===== PLAY GLOW ===== */
#playWrap{
  position:relative;
}
#glow{
  position:absolute;
  inset:-10px;
  border-radius:50%;
  filter:blur(18px);
  opacity:0;
  transition:opacity .3s;
}
.playing #glow{
  opacity:1;
  animation:glowCycle 6s linear infinite;
}
@keyframes glowCycle{
  0%{background:var(--glow-white);}
  20%{background:var(--glow-red);}
  40%{background:var(--glow-cyan);}
  60%{background:var(--glow-blue);}
  80%{background:var(--glow-purple);}
  100%{background:var(--glow-white);}
}

/* ===== SEEK ===== */
#seek{
  width:70%;
  position:relative;
}
#track{
  height:4px;
  background:#333;
  border-radius:2px;
}
#fill{
  height:4px;
  width:0%;
  background:linear-gradient(90deg,#fff,#6fefff);
  border-radius:2px;
}
#thumb{
  position:absolute;
  top:-4px;
  width:12px;
  height:12px;
  border-radius:50%;
  background:#fff;
  transform:translateX(-50%);
}
.time{
  display:flex;
  justify-content:space-between;
  font-size:12px;
  color:#aaa;
}
</style>
</head>

<body>

<div id="videoWrap">
  <iframe id="video" allow="autoplay"></iframe>
</div>

<div id="cd"></div>

<div id="controls">
  <div class="btns">
    <svg id="prev" viewBox="0 0 24 24">
      <polygon points="15,5 15,19 5,12"/>
      <rect x="16" y="5" width="3" height="14"/>
    </svg>

    <div id="playWrap">
      <div id="glow"></div>
      <svg id="play" viewBox="0 0 24 24">
        <polygon id="playIcon" points="8,5 19,12 8,19"/>
      </svg>
    </div>

    <svg id="next" viewBox="0 0 24 24">
      <polygon points="9,5 9,19 19,12"/>
      <rect x="5" y="5" width="3" height="14"/>
    </svg>
  </div>

  <div id="seek">
    <div id="track">
      <div id="fill"></div>
    </div>
    <div id="thumb"></div>
    <div class="time">
      <span id="cur">0:00</span>
      <span id="dur">0:00</span>
    </div>
  </div>
</div>

<script>
/* ===== album data ===== */
const album=[
 {title:"Track 1",artist:"Artist",id:"VIDEO_ID1"},
 {title:"Track 2",artist:"Artist",id:"VIDEO_ID2"}
];
let idx=0;

/* ===== state ===== */
let playing=false;
let duration=240;
let current=0;
let raf;

/* ===== elements ===== */
const cd=document.getElementById('cd');
const video=document.getElementById('video');
const fill=document.getElementById('fill');
const thumb=document.getElementById('thumb');
const cur=document.getElementById('cur');
const dur=document.getElementById('dur');
const playBtn=document.getElementById('playWrap');

/* ===== helpers ===== */
const fmt=t=>`${Math.floor(t/60)}:${String(Math.floor(t%60)).padStart(2,'0')}`;

/* ===== seek sync (完全同フレーム) ===== */
function sync(){
  if(!playing)return;
  current+=1/60;
  if(current>duration)current=duration;

  const p=current/duration*100;
  fill.style.width=p+"%";
  thumb.style.left=p+"%";
  cur.textContent=fmt(current);

  raf=requestAnimationFrame(sync);
}

/* ===== play toggle ===== */
playBtn.onclick=()=>{
  playing=!playing;
  document.body.classList.toggle('playing',playing);
  cd.classList.toggle('spin',playing);

  if(playing){
    raf=requestAnimationFrame(sync);
  }else{
    cancelAnimationFrame(raf);
  }
};

/* ===== init ===== */
dur.textContent=fmt(duration);
</script>
</body>
</html>
